import { useState } from 'react'
import { motion, useScroll, useTransform } from 'framer-motion'

export default function Component() {
  const [isFormSubmitted, setIsFormSubmitted] = useState(false)
  const { scrollY } = useScroll()

  const y1 = useTransform(scrollY, [0, 300], [0, 100])
  const y2 = useTransform(scrollY, [0, 300], [0, -100])
  const x1 = useTransform(scrollY, [0, 300], [-50, 0])
  const x2 = useTransform(scrollY, [0, 300], [50, 0])
  const opacity = useTransform(scrollY, [0, 300], [1, 0.5])
  const scale = useTransform(scrollY, [0, 300], [1, 1.1])

  const handleSubmit = async (event) => {
    event.preventDefault()
    const form = event.target
    const formData = new FormData(form)

    try {
      const response = await fetch('https://formspree.io/f/mnnqdvbn', {
        method: 'POST',
        body: formData,
        headers: {
          'Accept': 'application/json'
        },
      })

      if (response.ok) {
        setIsFormSubmitted(true)
        form.reset()
      } else {
        console.error('Form submission failed')
      }
    } catch (error) {
      console.error('Error:', error)
    }
  }

  return (
    <div className="min-h-screen bg-gray-50 flex flex-col">
      <header className="relative bg-gradient-to-r from-blue-600 to-blue-800 text-white py-16 overflow-hidden">
        <motion.div
          initial={{ opacity: 0, y: -20 }}
          animate={{ opacity: 1, y: 0 }}
          transition={{ duration: 0.5 }}
          className="container mx-auto px-4 z-10 relative"
        >
          <motion.h1 
            initial={{ x: -50, opacity: 0 }}
            animate={{ x: 0, opacity: 1 }}
            transition={{ duration: 0.5, delay: 0.2 }}
            className="text-5xl font-bold mb-4"
          >
            UpTown Cleaning Connect
          </motion.h1>
          <motion.p 
            initial={{ x: 50, opacity: 0 }}
            animate={{ x: 0, opacity: 1 }}
            transition={{ duration: 0.5, delay: 0.4 }}
            className="text-xl"
          >
            Connecting Columbia Students & Upper Manhattan Residents with Affordable Cleaning Services
          </motion.p>
        </motion.div>
        <motion.div
          style={{ y: y1, opacity, scale }}
          className="absolute top-0 left-0 w-full h-full z-0 bg-blue-900 opacity-20"
        />
      </header>

      <main className="container mx-auto px-4 py-16 flex-grow">
        <section className="mb-24 relative">
          <motion.h2 
            initial={{ opacity: 0, y: 20 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
            className="text-4xl font-bold mb-12 text-center"
          >
            How It Works
          </motion.h2>
          <div className="grid md:grid-cols-3 gap-12">
            {[
              { title: '1. Select Services', description: 'Choose from our range of cleaning services tailored to your needs.', icon: '🧹' },
              { title: '2. Get Matched', description: "We'll connect you with experienced local cleaners in your area.", icon: '🤝' },
              { title: '3. Enjoy a Clean Space', description: 'Receive professional cleaning services at student-friendly prices.', icon: '✨' },
            ].map((step, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, x: index % 2 === 0 ? -50 : 50 }}
                whileInView={{ opacity: 1, x: 0 }}
                transition={{ duration: 0.5, delay: index * 0.1 }}
                className="bg-white p-8 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300"
              >
                <div className="text-4xl mb-4">{step.icon}</div>
                <h3 className="text-2xl font-semibold mb-4 text-blue-600">{step.title}</h3>
                <p className="text-gray-600">{step.description}</p>
              </motion.div>
            ))}
          </div>
        </section>

        <section className="mb-24">
          <motion.h2 
            initial={{ opacity: 0, y: 20 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
            className="text-4xl font-bold mb-12 text-center"
          >
            Our Services
          </motion.h2>
          <div className="grid md:grid-cols-3 gap-12">
            {[
              {
                title: 'Basic Clean',
                price: 'From $70',
                features: ['Bathroom cleaning', 'Kitchen cleaning', 'Dusting & vacuuming', 'General tidying'],
                icon: '🧼',
              },
              {
                title: 'Deep Clean',
                price: 'From $120',
                features: ['All Basic Clean services', 'Deep kitchen cleaning', 'Inside cabinets', 'Window cleaning'],
                icon: '🧽',
              },
              {
                title: 'Full Clean',
                price: 'From $200',
                features: ['All Deep Clean services', 'Appliance cleaning', 'Wall washing', 'Advanced floor care'],
                icon: '🧴',
              },
            ].map((service, index) => (
              <motion.div
                key={index}
                initial={{ opacity: 0, scale: 0.9 }}
                whileInView={{ opacity: 1, scale: 1 }}
                transition={{ duration: 0.5, delay: index * 0.1 }}
                className="bg-white p-8 rounded-lg shadow-lg hover:shadow-xl transition-shadow duration-300"
              >
                <div className="text-4xl mb-4">{service.icon}</div>
                <h3 className="text-2xl font-semibold mb-2">{service.title}</h3>
                <p className="text-3xl font-bold text-blue-600 mb-6">{service.price}</p>
                <ul className="space-y-2">
                  {service.features.map((feature, featureIndex) => (
                    <li key={featureIndex} className="flex items-center">
                      <svg
                        className="w-5 h-5 mr-2 text-green-500"
                        fill="none"
                        strokeLinecap="round"
                        strokeLinejoin="round"
                        strokeWidth="2"
                        viewBox="0 0 24 24"
                        stroke="currentColor"
                      >
                        <path d="M5 13l4 4L19 7"></path>
                      </svg>
                      {feature}
                    </li>
                  ))}
                </ul>
              </motion.div>
            ))}
          </div>
        </section>

        <section className="max-w-2xl mx-auto relative">
          <motion.h2 
            initial={{ opacity: 0, y: 20 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
            className="text-4xl font-bold mb-12 text-center"
          >
            Book a Cleaning
          </motion.h2>
          <motion.form
            initial={{ opacity: 0, x: -50 }}
            whileInView={{ opacity: 1, x: 0 }}
            transition={{ duration: 0.5 }}
            className="bg-white p-8 rounded-lg shadow-lg"
            onSubmit={handleSubmit}
          >
            <div className="space-y-4">
              <div>
                <label className="block mb-1 font-medium">Service Type</label>
                <select name="service" required className="w-full p-2 border rounded">
                  <option value="">Select a service...</option>
                  <option value="basic">Basic Clean</option>
                  <option value="deep">Deep Clean</option>
                  <option value="full">Full Clean</option>
                </select>
              </div>
              
              <div>
                <label className="block mb-1 font-medium">Cleaning Frequency</label>
                <select name="frequency" required className="w-full p-2 border rounded">
                  <option value="one-time">One-time</option>
                  <option value="weekly">Weekly</option>
                  <option value="bi-weekly">Bi-weekly</option>
                  <option value="monthly">Monthly</option>
                </select>
              </div>
    
              <div>
                <label className="block mb-1 font-medium">Preferred Date</label>
                <input type="date" name="date" required className="w-full p-2 border rounded" />
              </div>
    
              <div>
                <label className="block mb-1 font-medium">Preferred Time</label>
                <select name="time" required className="w-full p-2 border rounded">
                  <option value="morning">Morning (9AM - 12PM)</option>
                  <option value="afternoon">Afternoon (12PM - 3PM)</option>
                  <option value="evening">Evening (3PM - 6PM)</option>
                </select>
              </div>
    
              <div>
                <label className="block mb-1 font-medium">Special Requirements</label>
                <textarea name="requirements" rows={3} className="w-full p-2 border rounded"></textarea>
              </div>
    
              <div>
                <label className="block mb-1 font-medium">Name</label>
                <input type="text" name="name" required className="w-full p-2 border rounded" />
              </div>
    
              <div>
                <label className="block mb-1 font-medium">Email</label>
                <input type="email" name="email" required className="w-full p-2 border rounded" />
              </div>
    
              <div>
                <label className="block mb-1 font-medium">Phone Number</label>
                <input type="tel" name="phone" required className="w-full p-2 border rounded" />
              </div>
    
              <div>
                <label className="block mb-1 font-medium">Address</label>
                <input type="text" name="address" required className="w-full p-2 border rounded" />
              </div>
    
              <motion.button
                type="submit"
                whileHover={{ scale: 1.05 }}
                whileTap={{ scale: 0.95 }}
                className="w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition duration-300 text-lg font-semibold"
              >
                Book Now
              </motion.button>
    
              {isFormSubmitted && (
                <motion.div
                  initial={{ opacity: 0, y: 20 }}
                  animate={{ opacity: 1, y: 0 }}
                  className="text-green-600 text-center font-medium"
                >
                  Thank you! We'll contact you shortly to confirm your booking.
                </motion.div>
              )}
            </div>
          </motion.form>
        </section>
      </main>

      <footer className="bg-gradient-to-r from-gray-800 to-gray-900 text-white py-12 mt-12">
        <div className="container mx-auto px-4 text-center">
          <motion.p 
            initial={{ opacity: 0, y: 20 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5 }}
            className="text-xl mb-4"
          >
            Serving Upper Manhattan: 96th Street West to 191st Street West
          </motion.p>
          <motion.p 
            initial={{ opacity: 0, y: 20 }}
            whileInView={{ opacity: 1, y: 0 }}
            transition={{ duration: 0.5, delay: 0.2 }}
            className="text-sm opacity-75"
          >
            © 2024 UpTown Cleaning Connect. All rights reserved.
          </motion.p>
        </div>
      </footer>
    </div>
  )
}
